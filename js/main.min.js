jQuery((function(e){var t,n,o,a=jQuery(".weather-info-wrap"),i=a.find(".weather-info-overlay").find("h3"),s=e(".weather-info-current"),r=e(".wic-location"),c=r.find(".wic-location-city"),l=r.find(".wic-location-country"),m=s.find(".wic-temp h1"),d=e(".wif-current-state"),u=d.find(".wif-icon img"),f=d.find(".wif-description h4"),h=["BS","BZ","KY","PW","US"];y(),e(".current-location").on("click",(function(){g.val(""),a.removeClass("weather-info-loaded-2"),i.text("Retrieving weather information..."),setTimeout((function(){a.removeClass("weather-info-loaded-1"),setTimeout((function(){y()}),450)}),200)}));var p=e("#locationForm"),g=p.find("#location"),w="";function y(){navigator.geolocation.getCurrentPosition((function(a){t=a.coords.latitude,n=a.coords.longitude,e.ajax({async:!0,crossDomain:!0,url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=false&key=AIzaSyByUe5jHZIiNa9TnDOQKmDIy8EcRvHa92I",method:"GET",success:function(e){o=-1==h.indexOf(e.results[0].address_components[5].short_name)?"metric":"imperial",c.html(e.results[0].address_components[2].long_name),l.html(e.results[0].address_components[5].long_name),v(t,n)}})}),(function(){i.html("Unable to retrieve your location.<br>Please activate your location setting, then refresh the page.")}))}function v(t,n){e.ajax({async:!0,crossDomain:!0,url:"https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+n+"&appid=0e4ac4b36b6cdcf2661160019d9f5154&exclude=minutely,hourly,alerts&units="+o,method:"GET",success:function(t){var n,o=t.current,i=o.weather[0],r=(n=i.description).charAt(0).toUpperCase()+n.slice(1).toLowerCase(),c=i.icon,l=o.temp;s.css("background-image",'url("images/bgs/'+c+'.jpg")'),m.html(Math.ceil(l)+"<span>"+T()+"</span>"),u.attr("src","images/icons/"+c+".svg"),f.html(r);var d,h=t.daily,p=1;e(".wif-daily .wif-day").each((function(t){var n;d=h[p],e(this).children(".wif-heading").html((n=d.dt,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(1e3*n).getDay()])),e(this).children(".wif-icon").children("img").attr("src","images/icons/"+d.weather[0].icon+".svg"),e(this).children(".wif-temp").html(Math.ceil(d.temp.min)+" / "+Math.ceil(d.temp.max)+T()),p++})),setTimeout((function(){a.addClass("weather-info-loaded-1"),setTimeout((function(){a.addClass("weather-info-loaded-2")}),400)}),350)}})}function T(){return"metric"===o?" &deg;C":" &deg;F"}p.on("submit",(function(s){s.preventDefault();var r=g.val();""!==r?(w=r,a.removeClass("weather-info-loaded-2"),i.text("Retrieving weather information..."),setTimeout((function(){a.removeClass("weather-info-loaded-1"),setTimeout((function(){e.ajax({async:!0,crossDomain:!0,url:"https://maps.googleapis.com/maps/api/geocode/json?address="+w+"&key=AIzaSyByUe5jHZIiNa9TnDOQKmDIy8EcRvHa92I",method:"GET",success:function(e){o=-1==h.indexOf(e.results[0].address_components[3].short_name)?"metric":"imperial",c.html(e.results[0].address_components[0].long_name),l.html(e.results[0].address_components[3].long_name),t=e.results[0].geometry.location.lat,n=e.results[0].geometry.location.lng,v(t,n)}})}),400)}),200)):y()}))}));