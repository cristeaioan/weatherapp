jQuery((function(e){var t,n,o,i=jQuery(".weather-info-wrap"),a=i.find(".weather-info-overlay").find("h3"),r=e(".weather-info-current"),c=e(".wic-location"),s=c.find(".wic-location-city"),l=c.find(".wic-location-country"),m=r.find(".wic-temp h1"),d=e(".wif-current-state"),u=d.find(".wif-icon img"),f=d.find(".wif-description h4"),h=["BS","BZ","KY","PW","US"];w(),e(".current-location").on("click",(function(){y.val(""),i.removeClass("weather-info-loaded-2"),a.text("Retrieving weather information..."),setTimeout((function(){i.removeClass("weather-info-loaded-1"),setTimeout((function(){w()}),450)}),200)}));var g,p=e("#locationForm"),y=document.getElementById("location");function w(){navigator.geolocation.getCurrentPosition((function(i){t=i.coords.latitude,n=i.coords.longitude,e.ajax({async:!0,crossDomain:!0,url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=false&key=AIzaSyByUe5jHZIiNa9TnDOQKmDIy8EcRvHa92I",method:"GET",success:function(e){for(var i=e.results[0].address_components,a="",r="",c="",m=0;m<i.length;m++)for(var d=0;d<i[m].types.length;d++)"country"===i[m].types[d]&&(a=i[m].long_name,r=i[m].short_name),"locality"===i[m].types[d]&&(c=i[m].long_name);o=-1==h.indexOf(r)?"metric":"imperial",s.html(c),l.html(a),v(t,n)}})}),(function(){a.html("Unable to retrieve your location.<br>Please activate your location setting, then refresh the page.")}))}function v(t,n){e.ajax({async:!0,crossDomain:!0,url:"https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+n+"&appid=0e4ac4b36b6cdcf2661160019d9f5154&exclude=minutely,hourly,alerts&units="+o,method:"GET",success:function(t){console.log(t);var n,o=t.current,a=o.weather[0],c=(n=a.description).charAt(0).toUpperCase()+n.slice(1).toLowerCase(),s=a.icon,l=o.temp;r.css("background-image",'url("images/bgs/'+s+'.jpg")'),m.html(Math.ceil(l)+"<span>"+T()+"</span>"),u.attr("src","images/icons/"+s+".svg"),f.html(c);var d,h=t.daily,g=1;e(".wif-daily .wif-day").each((function(t){var n;d=h[g],e(this).children(".wif-heading").html((n=d.dt,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(1e3*n).getDay()])),e(this).children(".wif-icon").children("img").attr("src","images/icons/"+d.weather[0].icon+".svg"),e(this).children(".wif-temp").html(Math.ceil(d.temp.min)+" / "+Math.ceil(d.temp.max)+T()),g++})),setTimeout((function(){i.addClass("weather-info-loaded-1"),setTimeout((function(){i.addClass("weather-info-loaded-2")}),400)}),350)}})}function T(){return"metric"===o?" &deg;C":" &deg;F"}p.on("submit",(function(e){e.preventDefault()})),(g=new google.maps.places.Autocomplete(y,{types:["(cities)"],fields:["address_components","geometry"]})).addListener("place_changed",(function(){var e=g.getPlace();e.geometry?(i.removeClass("weather-info-loaded-2"),a.text("Retrieving weather information..."),setTimeout((function(){i.removeClass("weather-info-loaded-1"),setTimeout((function(){for(var i,a,r,c=e.address_components,m=e.geometry.location,d=0;d<c.length;d++)for(var u=0;u<c[d].types.length;u++)"country"===c[d].types[u]&&(i=c[d].long_name,a=c[d].short_name),"locality"===c[d].types[u]&&(r=c[d].long_name);s.html(r),l.html(i),o=-1==h.indexOf(a)?"metric":"imperial",t=m.lat(),n=m.lng(),v(t,n)}),400)}),200)):y.placeholder("Enter a place")}))}));