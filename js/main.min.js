jQuery((function(e){var t,n,o,a=jQuery(".weather-info-wrap"),i=a.find(".weather-info-overlay").find("h3"),r=e(".weather-info-current"),s=e(".wic-location"),c=s.find(".wic-location-city"),l=s.find(".wic-location-country"),m=r.find(".wic-temp h1"),d=e(".wif-current-state"),u=d.find(".wif-icon img"),f=d.find(".wif-description h4"),h=["BS","BZ","KY","PW","US"];w(),e(".current-location").on("click",(function(){p.val(""),a.removeClass("weather-info-loaded-2"),i.text("Retrieving weather information..."),setTimeout((function(){a.removeClass("weather-info-loaded-1"),setTimeout((function(){w()}),450)}),200)}));var g=e("#locationForm"),p=g.find("#location"),y="";function w(){navigator.geolocation.getCurrentPosition((function(a){t=a.coords.latitude,n=a.coords.longitude,e.ajax({async:!0,crossDomain:!0,url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=false&key=AIzaSyByUe5jHZIiNa9TnDOQKmDIy8EcRvHa92I",method:"GET",success:function(e){for(var a=e.results[0].address_components,i="",r="",s="",m=0;m<a.length;m++)for(var d=0;d<a[m].types.length;d++)"country"===a[m].types[d]&&(i=a[m].long_name,r=a[m].short_name),"locality"===a[m].types[d]&&(s=a[m].long_name);o=-1==h.indexOf(r)?"metric":"imperial",c.html(s),l.html(i),v(t,n)}})}),(function(){i.html("Unable to retrieve your location.<br>Please activate your location setting, then refresh the page.")}))}function v(t,n){e.ajax({async:!0,crossDomain:!0,url:"https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+n+"&appid=0e4ac4b36b6cdcf2661160019d9f5154&exclude=minutely,hourly,alerts&units="+o,method:"GET",success:function(t){var n,o=t.current,i=o.weather[0],s=(n=i.description).charAt(0).toUpperCase()+n.slice(1).toLowerCase(),c=i.icon,l=o.temp;r.css("background-image",'url("images/bgs/'+c+'.jpg")'),m.html(Math.ceil(l)+"<span>"+T()+"</span>"),u.attr("src","images/icons/"+c+".svg"),f.html(s);var d,h=t.daily,g=1;e(".wif-daily .wif-day").each((function(t){var n;d=h[g],e(this).children(".wif-heading").html((n=d.dt,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(1e3*n).getDay()])),e(this).children(".wif-icon").children("img").attr("src","images/icons/"+d.weather[0].icon+".svg"),e(this).children(".wif-temp").html(Math.ceil(d.temp.min)+" / "+Math.ceil(d.temp.max)+T()),g++})),setTimeout((function(){a.addClass("weather-info-loaded-1"),setTimeout((function(){a.addClass("weather-info-loaded-2")}),400)}),350)}})}function T(){return"metric"===o?" &deg;C":" &deg;F"}g.on("submit",(function(r){r.preventDefault();var s=p.val();""!==s?(y=s,a.removeClass("weather-info-loaded-2"),i.text("Retrieving weather information..."),setTimeout((function(){a.removeClass("weather-info-loaded-1"),setTimeout((function(){e.ajax({async:!0,crossDomain:!0,url:"https://maps.googleapis.com/maps/api/geocode/json?address="+y+"&key=AIzaSyByUe5jHZIiNa9TnDOQKmDIy8EcRvHa92I",method:"GET",success:function(e){for(var a=e.results[0].address_components,i="",r="",s="",m=0;m<a.length;m++)for(var d=0;d<a[m].types.length;d++)"country"===a[m].types[d]&&(i=a[m].long_name,r=a[m].short_name),"locality"===a[m].types[d]&&(s=a[m].long_name);o=-1==h.indexOf(r)?"metric":"imperial",c.html(s),l.html(i),t=e.results[0].geometry.location.lat,n=e.results[0].geometry.location.lng,v(t,n)}})}),400)}),200)):w()}))}));